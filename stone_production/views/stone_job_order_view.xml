<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <menuitem id="stone_job_order_menu_root" name="Job Orders"
              parent="stone_production.stock_production_root" sequence="1"/>
    <record id="stone_job_order_form_view" model="ir.ui.view">
        <field name="name">stone.job.order.form.view</field>
        <field name="model">stone.job.order</field>
        <field name="arch" type="xml">
            <form string="Job Order">
                <header>
                    <field name="cut_status" widget="statusbar" statusbar_visible="draft,under_cutting,completed"/>
                </header>
                <sheet>
                    <field name="active" invisible="1"/>
                    <widget name="web_ribbon" title="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
                    <div class="oe_title">
                        <label for="item_id" string="Item"/>
                        <h1>
                            <div class="d-flex">
                                <field class="text-break" name="item_id"/>
                            </div>
                        </h1>
                    </div>
                    <group>
                        <group string="Main Details">
                            <!--                            <field name="job_type_id" options="{'no_create': 1, 'no_create_edit': 1}"-->
                            <!--                                   attrs="{'readonly':[('cut_status', '!=', 'new')]}"/>-->
                            <field name="job_type" attrs="{'readonly':[('cut_status', '!=', 'new')]}"/>
                            <field name="item_type_id" readonly="1" force_save="1"/>
                            <field name="item_type_size" invisble="1"/>
                            <field name="parent_id" readonly="1" force_save="1"/>
                        </group>
                        <group string="Dimensions">
                            <label for="cut_width" />
                            <div class="o_row" name="cut_width">
                                <field name="cut_width" class="oe_inline" attrs="{'readonly':[('cut_status', '!=', 'new')]}"/>
                                <field name="dimension_uom_id" readonly="1" force_save="1"/>
                            </div>
                            <label for="cut_length"/>
                            <div class="o_row" name="cut_length">
                                <field name="cut_length" class="oe_inline" attrs="{'readonly':[('cut_status', '!=', 'new')]}"/>
                                <field name="dimension_uom_id" readonly="1" force_save="1"/>
                            </div>
                            <label for="cut_height" attrs="{'invisible':[('item_type_size','!=', 'volume')]}"/>
                            <div class="o_row" name="cut_height" attrs="{'invisible':[('item_type_size','!=', 'volume')]}">
                                <field name="cut_height" class="oe_inline" attrs="{'readonly':[('cut_status', '!=', 'new')]}"/>
                                <field name="dimension_uom_id" readonly="1" force_save="1"/>
                            </div>
                            <label for="cut_thickness" attrs="{'invisible':[('item_type_size','in', ('volume', 'surface'))]}"/>
                            <div class="o_row" name="cut_thickness" attrs="{'invisible':[('item_type_size','in', ('volume', 'surface'))]}">
                                <field name="cut_thickness" class="oe_inline" attrs="{'readonly':[('cut_status', '!=', 'new')]}"/>
                                <field name="dimension_uom_id" readonly="1" force_save="1"/>
                            </div>
                            <b><label for="cut_size_value"/></b>
                            <div class="o_row" name="size_value">
                                <field name="cut_size_value" class="oe_inline"/>
                                <field name="type_size_uom_id" readonly="1" force_save="1"/>
                            </div>
                        </group>
                        <group string="Extra Details">
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="activity_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>
    <record id="stone_job_order_tree_view" model="ir.ui.view">
        <field name="name">stone.job.order.tree.view</field>
        <field name="model">stone.job.order</field>
        <field name="arch" type="xml">
            <tree >
                <field name="item_id"/>
                <field name="job_type"/>
                <field name="cut_status" widget="badge" optional="show" decoration-info="cut_status == 'under_cutting'"
                       decoration-success="cut_status == 'completed'" />
            </tree>
        </field>
    </record>
    <!--Blocks-->
    <record id="stone_job_order_action_block" model="ir.actions.act_window">
        <field name="name">Cutting Blocks</field>
        <field name="res_model">stone.job.order</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="stone_job_order_tree_view"/>
        <field name="domain">[('job_type','=', 'block')]</field>
        <field name="context">{'default_job_type': 'block'}</field>
    </record>
    <menuitem id="stone_job_order_menu_block"
              parent="stone_production.stone_job_order_menu_root"
              action="stone_job_order_action_block" sequence="1"/>
    <!--Blocks-->
    <record id="stone_job_order_action_slab" model="ir.actions.act_window">
        <field name="name">Cutting Slabs</field>
        <field name="res_model">stone.job.order</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="stone_job_order_tree_view"/>
        <field name="domain">[('job_type','=', 'slab')]</field>
        <field name="context">{'default_job_type': 'slab'}</field>
    </record>
    <menuitem id="stone_job_order_menu_slab"
              parent="stone_production.stone_job_order_menu_root"
              action="stone_job_order_action_slab" sequence="1"/>
</odoo>